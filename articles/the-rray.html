<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The <code>rray</code> • rray</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The &lt;code&gt;rray&lt;/code&gt;">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rray</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/broadcasting.html">Broadcasting</a>
    </li>
    <li>
      <a href="../articles/the-rray.html">The `rray`</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/DavisVaughan/rray">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>The <code>rray</code>
</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DavisVaughan/rray/blob/master/vignettes/the-rray.Rmd"><code>vignettes/the-rray.Rmd</code></a></small>
      <div class="hidden name"><code>the-rray.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(rray)</a></code></pre></div>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>rray provides a new array-like class that alters some of the behavior with base R arrays that I find non-intuitive. In the same spirit as the tibble package, rray does less than base R, but works as consistently and intuitively as possible.</p>
</div>
<div id="subsetting" class="section level2">
<h2 class="hasAnchor">
<a href="#subsetting" class="anchor"></a>Subsetting</h2>
<p>Base R subsets matrices and arrays with a default of <code>drop = TRUE</code>, similar to data frames. This can result in problematic behavior, especially when programming around arrays, because a lot of mental work is required to ensure that functions don’t accidentally subset matrices in a way that coerces them to vectors.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">x_mat &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">x_mat</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt;      [,1] [,2]</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; [1,]    1    4</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; [2,]    2    5</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; [3,]    3    6</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">x_mat[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,]</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt;      [,1] [,2]</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; [1,]    1    4</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; [2,]    2    5</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"></a>
<a class="sourceLine" id="cb2-13" data-line-number="13">x_mat[<span class="dv">1</span>,]</a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; [1] 1 4</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"></a>
<a class="sourceLine" id="cb2-16" data-line-number="16">x_mat[,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;      [,1] [,2]</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt; [1,]    1    4</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt; [2,]    2    5</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt; [3,]    3    6</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"></a>
<a class="sourceLine" id="cb2-22" data-line-number="22">x_mat[,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt; [1] 1 2 3</span></a></code></pre></div>
<p>Generally, the fix for this is to use <code>drop = FALSE</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">x_mat[<span class="dv">1</span>, , drop =<span class="st"> </span><span class="ot">FALSE</span>]</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt;      [,1] [,2]</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; [1,]    1    4</span></a></code></pre></div>
<p>But this requires careful thinking about how to subset arrays programatically, adding the right number of commas where required to ensure that dimensions aren’t dropped. Consider pulling the first row of each dimension, and pay attention to the varying number of commas required to prevent a vector from being returned.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">x_3D &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/array">array</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">x_4D &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/array">array</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">x_3D[<span class="dv">1</span>, , , drop =<span class="st"> </span><span class="ot">FALSE</span>]</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; [1,]    1    3    5</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt; [1,]    7    9   11</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">x_4D[<span class="dv">1</span>, , , , drop =<span class="st"> </span><span class="ot">FALSE</span>]</a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt; , , 1, 1</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt; [1,]    1    3    5</span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21"><span class="co">#&gt; , , 2, 1</span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-23" data-line-number="23"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24"><span class="co">#&gt; [1,]    7    9   11</span></a></code></pre></div>
<p>rray takes a different approach, and never drops dimensions when subsetting. This approach actually frees up more intuitive subsetting syntax, which actually results in an error with base R.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">x_3D_rray &lt;-<span class="st"> </span><span class="kw"><a href="../reference/as_rray.html">as_rray</a></span>(x_3D)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">x_3D_rray[<span class="dv">1</span>,]</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; &lt;vctrs_rray&lt;integer&gt;[,3,2][6]&gt;</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; [1,]    1    3    5</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; [1,]    7    9   11</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"></a>
<a class="sourceLine" id="cb5-15" data-line-number="15">x_3D[<span class="dv">1</span>,]</a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; Error in x_3D[1, ]: incorrect number of dimensions</span></a></code></pre></div>
<p>In this way, whether subsetting one element or multiple elements from a certain dimension, the result is an array with the same dimensionality as before. This is more predictable to program around.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">x_3D_rray[, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt; &lt;vctrs_rray&lt;integer&gt;[,1,2][4]&gt;</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;      [,1]</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; [1,]    1</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; [2,]    2</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt;      [,1]</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt; [1,]    7</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt; [2,]    8</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"></a>
<a class="sourceLine" id="cb6-15" data-line-number="15">x_3D_rray[, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt; &lt;vctrs_rray&lt;integer&gt;[,2,2][8]&gt;</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="co">#&gt;      [,1] [,2]</span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20"><span class="co">#&gt; [1,]    1    3</span></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"><span class="co">#&gt; [2,]    2    4</span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-25" data-line-number="25"><span class="co">#&gt;      [,1] [,2]</span></a>
<a class="sourceLine" id="cb6-26" data-line-number="26"><span class="co">#&gt; [1,]    7    9</span></a>
<a class="sourceLine" id="cb6-27" data-line-number="27"><span class="co">#&gt; [2,]    8   10</span></a></code></pre></div>
</div>
<div id="element-access" class="section level2">
<h2 class="hasAnchor">
<a href="#element-access" class="anchor"></a>Element Access</h2>
<p>Base R allows you to access inner elements of an array by using <code>[</code> without any commas. Again, this dropping of dimensions feels inconsistent, and is rarely something that I’ve wanted to happen.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">x_3D[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; [1] 1 2</span></a></code></pre></div>
<p>rray disables this behavior, and instead throws an error.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">x_3D_rray[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; Error: Use `x[,j]` to select columns, not `x[j]`.</span></a></code></pre></div>
<p>Instead, either coerce to a vector then subset the inner elements, or first use the more explicit rray subsetting behavior to isolate the elements (keeping the dimensionality) and then call <code><a href="https://www.rdocumentation.org/packages/base/topics/vector">as.vector()</a></code>. Alternatively, to keep an rray but drop dimensions of size <code>1</code>, use <code><a href="../reference/rray_squeeze.html">rray_squeeze()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># coerce then subset</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/vector">as.vector</a></span>(x_3D_rray)[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; [1] 1 2</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co"># subset</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6">x_slice &lt;-<span class="st"> </span>x_3D_rray[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">x_slice</a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; &lt;vctrs_rray&lt;integer&gt;[,1,1][2]&gt;</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co">#&gt;      [,1]</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="co">#&gt; [1,]    1</span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">#&gt; [2,]    2</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="co"># then coerce</span></a>
<a class="sourceLine" id="cb9-16" data-line-number="16"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/vector">as.vector</a></span>(x_slice)</a>
<a class="sourceLine" id="cb9-17" data-line-number="17"><span class="co">#&gt; [1] 1 2</span></a>
<a class="sourceLine" id="cb9-18" data-line-number="18"></a>
<a class="sourceLine" id="cb9-19" data-line-number="19"><span class="co"># or drop dimensions of size 1</span></a>
<a class="sourceLine" id="cb9-20" data-line-number="20"><span class="co"># to keep an rray</span></a>
<a class="sourceLine" id="cb9-21" data-line-number="21"><span class="kw"><a href="../reference/rray_squeeze.html">rray_squeeze</a></span>(x_slice)</a>
<a class="sourceLine" id="cb9-22" data-line-number="22"><span class="co">#&gt; &lt;vctrs_rray&lt;integer&gt;[2]&gt;</span></a>
<a class="sourceLine" id="cb9-23" data-line-number="23"><span class="co">#&gt; [1] 1 2</span></a></code></pre></div>
<p>An argument could be made for the behavior of <code>[</code> with no commas to work like data frames, returning columns.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">y =</span> <span class="dv">4</span><span class="op">:</span><span class="dv">6</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3">df[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt;   x</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt; 1 1</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt; 2 2</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; 3 3</span></a></code></pre></div>
<p>This works fine for 2 dimensional data frames, where returning the columns can be justified as the most intuitive thing to do (especially for data analysis). But for arrays with 3 or more dimensions, the mental model of “rows” and “columns” is generally traded in for simply saying “the first dimension”. In this world, there is no strong case for <code>[</code> with no commas to have a special behavior of always returning elements from an arbitrary 2nd dimension.</p>
</div>
<div id="dimension-names" class="section level2">
<h2 class="hasAnchor">
<a href="#dimension-names" class="anchor"></a>Dimension Names</h2>
<p>Base R has consistent dimension name handling rules, but they can be surprising because they often don’t retain the maximum amount of information that it seems like they could.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">x_row_nms &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">dimnames =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"r1"</span>, <span class="st">"r2"</span>)))</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">x_col_nms &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">dimnames =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="ot">NULL</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"c1"</span>)))</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">x_row_nms</a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt;    [,1]</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt; r1    1</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt; r2    2</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"></a>
<a class="sourceLine" id="cb11-9" data-line-number="9">x_col_nms</a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt;      c1</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt; [1,]  1</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co">#&gt; [2,]  2</span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13"></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co"># names from x_row_nms are used</span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15">x_row_nms <span class="op">+</span><span class="st"> </span>x_col_nms</a>
<a class="sourceLine" id="cb11-16" data-line-number="16"><span class="co">#&gt;    [,1]</span></a>
<a class="sourceLine" id="cb11-17" data-line-number="17"><span class="co">#&gt; r1    2</span></a>
<a class="sourceLine" id="cb11-18" data-line-number="18"><span class="co">#&gt; r2    4</span></a>
<a class="sourceLine" id="cb11-19" data-line-number="19"></a>
<a class="sourceLine" id="cb11-20" data-line-number="20"><span class="co"># names from x_col_nms are used</span></a>
<a class="sourceLine" id="cb11-21" data-line-number="21">x_col_nms <span class="op">+</span><span class="st"> </span>x_row_nms</a>
<a class="sourceLine" id="cb11-22" data-line-number="22"><span class="co">#&gt;      c1</span></a>
<a class="sourceLine" id="cb11-23" data-line-number="23"><span class="co">#&gt; [1,]  2</span></a>
<a class="sourceLine" id="cb11-24" data-line-number="24"><span class="co">#&gt; [2,]  4</span></a></code></pre></div>
<p>There is no reason that dimension names from both inputs can’t be used here. rray has a different set of dimension name reconciliation rules that attempts to pull names from all inputs.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">x_row_nms_rray &lt;-<span class="st"> </span><span class="kw"><a href="../reference/as_rray.html">as_rray</a></span>(x_row_nms)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">x_col_nms_rray &lt;-<span class="st"> </span><span class="kw"><a href="../reference/as_rray.html">as_rray</a></span>(x_col_nms)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"></a>
<a class="sourceLine" id="cb12-4" data-line-number="4">x_row_nms_rray <span class="op">+</span><span class="st"> </span>x_col_nms_rray</a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt; &lt;vctrs_rray&lt;integer&gt;[,1][2]&gt;</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt;    c1</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; r1  2</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; r2  4</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"></a>
<a class="sourceLine" id="cb12-10" data-line-number="10">x_col_nms_rray <span class="op">+</span><span class="st"> </span>x_row_nms_rray</a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt; &lt;vctrs_rray&lt;integer&gt;[,1][2]&gt;</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt;    c1</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt; r1  2</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt; r2  4</span></a></code></pre></div>
<p>This isn’t to say that the order doesn’t matter. If both inputs have row names, for example, the row names of the result come from the first input.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">x_col_row_nms_rray &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dim-names.html">set_row_names</a></span>(x_col_nms_rray, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"row1"</span>, <span class="st">"row2"</span>))</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">x_col_row_nms_rray</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co">#&gt; &lt;vctrs_rray&lt;integer&gt;[,1][2]&gt;</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt;      c1</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt; row1  1</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; row2  2</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"></a>
<a class="sourceLine" id="cb13-8" data-line-number="8">x_row_nms_rray <span class="op">+</span><span class="st"> </span>x_col_row_nms_rray</a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt; &lt;vctrs_rray&lt;integer&gt;[,1][2]&gt;</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt;    c1</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#&gt; r1  2</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt; r2  4</span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"></a>
<a class="sourceLine" id="cb13-14" data-line-number="14">x_col_row_nms_rray <span class="op">+</span><span class="st"> </span>x_row_nms_rray</a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co">#&gt; &lt;vctrs_rray&lt;integer&gt;[,1][2]&gt;</span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="co">#&gt;      c1</span></a>
<a class="sourceLine" id="cb13-17" data-line-number="17"><span class="co">#&gt; row1  2</span></a>
<a class="sourceLine" id="cb13-18" data-line-number="18"><span class="co">#&gt; row2  4</span></a></code></pre></div>
<p>This approach emphasizes maintaining the maximum amount of information possible. The underlying engine for dimension name handling is <code><a href="../reference/common-dim-names.html">rray_dim_names_common()</a></code>. Pass it multiple inputs, and it will return the common dimension names using rray’s rules.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="../reference/common-dim-names.html">rray_dim_names_common</a></span>(x_row_nms, x_col_nms)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt; [1] "r1" "r2"</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt; [1] "c1"</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#subsetting">Subsetting</a></li>
      <li><a href="#element-access">Element Access</a></li>
      <li><a href="#dimension-names">Dimension Names</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Davis Vaughan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
