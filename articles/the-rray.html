<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The rray • rray</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The rray">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rray</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/broadcasting.html">Broadcasting</a>
    </li>
    <li>
      <a href="../articles/the-rray.html">The rray</a>
    </li>
    <li>
      <a href="../articles/toolkit.html">Toolkit</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-lib/rray">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>The rray</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/rray/blob/master/vignettes/the-rray.Rmd"><code>vignettes/the-rray.Rmd</code></a></small>
      <div class="hidden name"><code>the-rray.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(rray)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(vctrs)</a></code></pre></div>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>rray provides a new array class that changes some of the behavior with base R arrays that I think could be altered to result in code that is more predictable and easy to program around. In the same spirit as <a href="https://tibble.tidyverse.org/">tibble</a>, rrays do less than base R arrays to try and work as consistently and intuitively as possible.</p>
</div>
<div id="subsetting" class="section level2">
<h2 class="hasAnchor">
<a href="#subsetting" class="anchor"></a>Subsetting</h2>
<div id="the-problem" class="section level3">
<h3 class="hasAnchor">
<a href="#the-problem" class="anchor"></a>The problem</h3>
<p>Base R subsets matrices and arrays with a default of <code>drop = TRUE</code>, similar to data frames. This is one of the most common sources of bugs, especially when programming around arrays, because a lot of mental work is required to ensure that functions don’t accidentally subset matrices in a way that coerces them to vectors.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">x_mat &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">x_mat</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt;      [,1] [,2]</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; [1,]    1    4</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; [2,]    2    5</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; [3,]    3    6</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">x_mat[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,]</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt;      [,1] [,2]</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; [1,]    1    4</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; [2,]    2    5</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"></a>
<a class="sourceLine" id="cb2-13" data-line-number="13">x_mat[1L,]</a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; [1] 1 4</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"></a>
<a class="sourceLine" id="cb2-16" data-line-number="16">x_mat[,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;      [,1] [,2]</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt; [1,]    1    4</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt; [2,]    2    5</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt; [3,]    3    6</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"></a>
<a class="sourceLine" id="cb2-22" data-line-number="22">x_mat[,1L]</a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt; [1] 1 2 3</span></a></code></pre></div>
<p>This example demonstrates that <code>[</code> is not <em>type stable</em>. This means it is impossible to predict the type of the output solely based on the input’s type. <em>Type</em> is defined in the vctrs sense (read about it <a href="https://vctrs.r-lib.org/articles/type-size.html">here</a>), but for usage in rray think of the type as being the class of an object along with its attributes, and the <em>shape</em> of the object, which is the dimensionality of the array excluding the first dimension. The first dimension is handled separately as the <em>size</em>.</p>
<p>To give a concrete example, <code>x_mat</code> has a type of <code>&lt;integer[,2]&gt;</code>. Both <code>1:2</code> and <code>1L</code> have types of <code>&lt;integer&gt;</code>. So the full subset expression looks like: <code>&lt;integer[,2]&gt;[&lt;integer&gt;,]</code>. If <code>[</code> was type stable, you would be able to predict the output’s type based on these inputs. But you can’t! In some cases, this returns <code>&lt;integer[,2]&gt;</code>, and in others it returns <code>&lt;integer&gt;</code>.</p>
<p>Looking past the type instability, the fix for the dropping of dimensions is usually to use <code>drop = FALSE</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">x_mat[<span class="dv">1</span>, , drop =<span class="st"> </span><span class="ot">FALSE</span>]</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt;      [,1] [,2]</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; [1,]    1    4</span></a></code></pre></div>
<p>But this requires careful thinking about how to subset arrays programatically, adding the right number of commas where required to ensure that dimensions aren’t dropped. Consider how you would pull the first row of a 3D vs 4D array, and pay attention to the varying number of commas required to prevent a vector from being returned.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">x_3D &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/array">array</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">x_4D &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/array">array</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">x_3D[<span class="dv">1</span>, , , drop =<span class="st"> </span><span class="ot">FALSE</span>]</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; [1,]    1    3    5</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt; [1,]    7    9   11</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">x_4D[<span class="dv">1</span>, , , , drop =<span class="st"> </span><span class="ot">FALSE</span>]</a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt; , , 1, 1</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt; [1,]    1    3    5</span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21"><span class="co">#&gt; , , 2, 1</span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-23" data-line-number="23"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24"><span class="co">#&gt; [1,]    7    9   11</span></a></code></pre></div>
</div>
<div id="the-solution" class="section level3">
<h3 class="hasAnchor">
<a href="#the-solution" class="anchor"></a>The solution</h3>
<p>rray takes a different approach, and never drops dimensions when subsetting. This results in a type stable <code>[</code> method, and actually frees up subsetting syntax that I find more intuitive, but results in an error with base R. To convert <code>x_3D</code> to an rray, use <code><a href="../reference/as_rray.html">as_rray()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">x_3D_rray &lt;-<span class="st"> </span><span class="kw"><a href="../reference/as_rray.html">as_rray</a></span>(x_3D)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co"># First row, but still 3D</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">x_3D_rray[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; &lt;rray&lt;int&gt;[,3,2][1]&gt;</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; [1,]    1    3    5</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; [1,]    7    9   11</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co"># Trailing commas are ignored, so this is the same as above</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17">x_3D_rray[<span class="dv">1</span>,]</a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">#&gt; &lt;rray&lt;int&gt;[,3,2][1]&gt;</span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">#&gt; [1,]    1    3    5</span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb5-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb5-27" data-line-number="27"><span class="co">#&gt; [1,]    7    9   11</span></a>
<a class="sourceLine" id="cb5-28" data-line-number="28"></a>
<a class="sourceLine" id="cb5-29" data-line-number="29"><span class="co"># In base R this is an error</span></a>
<a class="sourceLine" id="cb5-30" data-line-number="30">x_3D[<span class="dv">1</span>,]</a>
<a class="sourceLine" id="cb5-31" data-line-number="31"><span class="co">#&gt; Error in x_3D[1, ]: incorrect number of dimensions</span></a></code></pre></div>
<p>This type stability makes rrays more predictable to program around. Whether subsetting one element or multiple elements from a specific dimension, you can know that the output will have a consistent type.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">x_3D_rray[, 1L]</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt; &lt;rray&lt;int&gt;[,1,2][2]&gt;</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;      [,1]</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; [1,]    1</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; [2,]    2</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt;      [,1]</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt; [1,]    7</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt; [2,]    8</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"></a>
<a class="sourceLine" id="cb6-15" data-line-number="15">x_3D_rray[, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt; &lt;rray&lt;int&gt;[,2,2][2]&gt;</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="co">#&gt;      [,1] [,2]</span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20"><span class="co">#&gt; [1,]    1    3</span></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"><span class="co">#&gt; [2,]    2    4</span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-25" data-line-number="25"><span class="co">#&gt;      [,1] [,2]</span></a>
<a class="sourceLine" id="cb6-26" data-line-number="26"><span class="co">#&gt; [1,]    7    9</span></a>
<a class="sourceLine" id="cb6-27" data-line-number="27"><span class="co">#&gt; [2,]    8   10</span></a></code></pre></div>
<p>If you are writing a package where you aren’t sure if the user is going to pass in an rray or an array, you’ll want to be sure that you can subset consistently, no matter the input type. For that, <code><a href="../reference/rray_subset.html">rray_subset()</a></code> has been exposed, which is what powers <code>[</code>. This means you can have this type stable subsetting with base R objects.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">x_3D[<span class="dv">1</span>, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; Error in x_3D[1, 1]: incorrect number of dimensions</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="kw"><a href="../reference/rray_subset.html">rray_subset</a></span>(x_3D, <span class="dv">1</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt;      [,1]</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; [1,]    1</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt;      [,1]</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt; [1,]    7</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co"># Same as with the rray</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="kw"><a href="../reference/rray_subset.html">rray_subset</a></span>(x_3D_rray, <span class="dv">1</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt; &lt;rray&lt;int&gt;[,1,2][1]&gt;</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="co">#&gt;      [,1]</span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">#&gt; [1,]    1</span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-25" data-line-number="25"><span class="co">#&gt;      [,1]</span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="co">#&gt; [1,]    7</span></a></code></pre></div>
</div>
</div>
<div id="subsetting-by-position" class="section level2">
<h2 class="hasAnchor">
<a href="#subsetting-by-position" class="anchor"></a>Subsetting by position</h2>
<div id="the-problem-1" class="section level3">
<h3 class="hasAnchor">
<a href="#the-problem-1" class="anchor"></a>The problem</h3>
<p>Base R allows you to access “inner” elements of an array by using <code>[</code> without any commas, i.e. <code>x[i]</code>. While technically this one operation on its own is type stable, when you compare it to <code>x[i,]</code> and <code>x[,i]</code>, it becomes clear that it is doing something completely different.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># Positions 1 and 2</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">x_3D[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; [1] 1 2</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co"># Positions 2 and 3</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co"># Correspond to elements at indices: </span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co"># (2, 1, 1) and (1, 2, 1)</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8">x_3D[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt; [1] 2 3</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="kw"><a href="../reference/rray_dim.html">rray_dim</a></span>(x_3D[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>])</a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt; [1] 2</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="kw"><a href="../reference/rray_dim.html">rray_dim</a></span>(x_3D[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,,])</a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="co">#&gt; [1] 2 3 2</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="kw"><a href="../reference/rray_dim.html">rray_dim</a></span>(x_3D[,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,])</a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="co">#&gt; [1] 2 2 2</span></a>
<a class="sourceLine" id="cb8-17" data-line-number="17"><span class="kw"><a href="../reference/rray_dim.html">rray_dim</a></span>(x_3D[,,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>])</a>
<a class="sourceLine" id="cb8-18" data-line-number="18"><span class="co">#&gt; [1] 2 3 2</span></a></code></pre></div>
<p>I think that this is a completely separate operation, called <em>subsetting by position</em>. The traditional behavior of <code>x[i, j, ...]</code> is called <em>subsetting by index</em>.</p>
</div>
<div id="the-solution-1" class="section level3">
<h3 class="hasAnchor">
<a href="#the-solution-1" class="anchor"></a>The solution</h3>
<p>As seen briefly in the subsetting section, rrays never drop dimensions, and ignore trailing commas when subsetting. This means that <code>x[i]</code> selects rows from <code>x</code>, not positions.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">x_3D_rray[<span class="dv">2</span>]</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt; &lt;rray&lt;int&gt;[,3,2][1]&gt;</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; [1,]    2    4    6</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co">#&gt; [1,]    8   10   12</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co"># Same as this</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14">x_3D_rray[<span class="dv">2</span>,]</a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="co">#&gt; &lt;rray&lt;int&gt;[,3,2][1]&gt;</span></a>
<a class="sourceLine" id="cb9-16" data-line-number="16"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb9-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-18" data-line-number="18"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb9-19" data-line-number="19"><span class="co">#&gt; [1,]    2    4    6</span></a>
<a class="sourceLine" id="cb9-20" data-line-number="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-21" data-line-number="21"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb9-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-23" data-line-number="23"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb9-24" data-line-number="24"><span class="co">#&gt; [1,]    8   10   12</span></a></code></pre></div>
<p>This behavior results in a nice symmetical predictable behavior that is easy to see if you draw out the different operations. Just by adding commas, we go from selecting rows, to columns, to elements in the third dimension. The type is stable the entire time.</p>
<pre><code>x[i]
x[,i]
x[,,i]</code></pre>
<p>Because trailing commas are ignored, the following are also equivalent to the above explanation.</p>
<pre><code>x[i,]
x[,i,]
x[,,i,]</code></pre>
<p>But what about selecting by position? This is still a useful operation, so it would make sense to have some way to do it. For that, you can equivalently use either <code><a href="../reference/rray_yank.html">rray_yank()</a></code> or <code>[[</code>. <code><a href="../reference/rray_yank.html">rray_yank()</a></code> always returns a 1D vector, and allows you to pass in an integer vector to subset by position.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co"># First 3 positions</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2">x_3D_rray[[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt; [1] 1 2 3</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="kw"><a href="../reference/rray_yank.html">rray_yank</a></span>(x_3D_rray, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; [1] 1 2 3</span></a></code></pre></div>
<p>There are assignment variations of these as well, which are very useful for replacing <code>NA</code> values if you combine it with the other type of object that <code>i</code> can be, a logical with the same dimensions as <code>x</code>. <code>TRUE</code> values are interpreted as the positions to subset.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">dummy &lt;-<span class="st"> </span>x_3D_rray</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co"># Set the first row to NA</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">dummy[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co"># Set NA values to 0</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7">dummy[[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/NA">is.na</a></span>(dummy)]] &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"></a>
<a class="sourceLine" id="cb13-9" data-line-number="9">dummy</a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt; &lt;rray&lt;int&gt;[,3,2][2]&gt;</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co">#&gt; [1,]    0    0    0</span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co">#&gt; [2,]    2    4    6</span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-17" data-line-number="17"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb13-18" data-line-number="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-19" data-line-number="19"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb13-20" data-line-number="20"><span class="co">#&gt; [1,]    0    0    0</span></a>
<a class="sourceLine" id="cb13-21" data-line-number="21"><span class="co">#&gt; [2,]    8   10   12</span></a></code></pre></div>
<p>The 3rd arm of subsetting is when you want to subset <em>by index</em> like <code><a href="../reference/rray_subset.html">rray_subset()</a></code>, but you want to actually drop the dimensions like <code><a href="../reference/rray_yank.html">rray_yank()</a></code>. This is accomplished with <code><a href="../reference/rray_extract.html">rray_extract()</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="../reference/rray_subset.html">rray_subset</a></span>(x_3D_rray, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">#&gt; &lt;rray&lt;int&gt;[,3,2][1]&gt;</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt; , , 1</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt; [1,]    1    3    5</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt; , , 2</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#&gt; [1,]    7    9   11</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="kw"><a href="../reference/rray_extract.html">rray_extract</a></span>(x_3D_rray, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt; &lt;rray&lt;int&gt;[6]&gt;</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt; [1]  1  3  5  7  9 11</span></a></code></pre></div>
</div>
</div>
<div id="dimension-names" class="section level2">
<h2 class="hasAnchor">
<a href="#dimension-names" class="anchor"></a>Dimension Names</h2>
<div id="the-problem-2" class="section level3">
<h3 class="hasAnchor">
<a href="#the-problem-2" class="anchor"></a>The problem</h3>
<p>Base R has consistent dimension name handling rules, but they can be surprising because they often don’t retain the maximum amount of information that it seems like they could.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">x_row_nms &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">dimnames =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"r1"</span>, <span class="st">"r2"</span>)))</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">x_col_nms &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">dimnames =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="ot">NULL</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"c1"</span>)))</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"></a>
<a class="sourceLine" id="cb15-4" data-line-number="4">x_row_nms</a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt;    [,1]</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">#&gt; r1    1</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">#&gt; r2    2</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"></a>
<a class="sourceLine" id="cb15-9" data-line-number="9">x_col_nms</a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="co">#&gt;      c1</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="co">#&gt; [1,]  1</span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="co">#&gt; [2,]  2</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co"># names from x_row_nms are used</span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15">x_row_nms <span class="op">+</span><span class="st"> </span>x_col_nms</a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="co">#&gt;    [,1]</span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17"><span class="co">#&gt; r1    2</span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18"><span class="co">#&gt; r2    4</span></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"></a>
<a class="sourceLine" id="cb15-20" data-line-number="20"><span class="co"># names from x_col_nms are used</span></a>
<a class="sourceLine" id="cb15-21" data-line-number="21">x_col_nms <span class="op">+</span><span class="st"> </span>x_row_nms</a>
<a class="sourceLine" id="cb15-22" data-line-number="22"><span class="co">#&gt;      c1</span></a>
<a class="sourceLine" id="cb15-23" data-line-number="23"><span class="co">#&gt; [1,]  2</span></a>
<a class="sourceLine" id="cb15-24" data-line-number="24"><span class="co">#&gt; [2,]  4</span></a></code></pre></div>
<p>It is reasonable that dimension names from both inputs could be used here.</p>
</div>
<div id="the-solution-2" class="section level3">
<h3 class="hasAnchor">
<a href="#the-solution-2" class="anchor"></a>The solution</h3>
<p>rray has a different set of dimension name reconciliation rules that attempts to pull names from all inputs.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">x_row_nms_rray &lt;-<span class="st"> </span><span class="kw"><a href="../reference/as_rray.html">as_rray</a></span>(x_row_nms)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">x_col_nms_rray &lt;-<span class="st"> </span><span class="kw"><a href="../reference/as_rray.html">as_rray</a></span>(x_col_nms)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"></a>
<a class="sourceLine" id="cb16-4" data-line-number="4">x_row_nms_rray <span class="op">+</span><span class="st"> </span>x_col_nms_rray</a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co">#&gt; &lt;rray&lt;int&gt;[,1][2]&gt;</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">#&gt;    c1</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">#&gt; r1  2</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt; r2  4</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"></a>
<a class="sourceLine" id="cb16-10" data-line-number="10">x_col_nms_rray <span class="op">+</span><span class="st"> </span>x_row_nms_rray</a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co">#&gt; &lt;rray&lt;int&gt;[,1][2]&gt;</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12"><span class="co">#&gt;    c1</span></a>
<a class="sourceLine" id="cb16-13" data-line-number="13"><span class="co">#&gt; r1  2</span></a>
<a class="sourceLine" id="cb16-14" data-line-number="14"><span class="co">#&gt; r2  4</span></a></code></pre></div>
<p>The order of the inputs still matters. If both inputs have row names, for example, the row names of the result come from the first input.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">x_col_and_row_nms_rray &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dim-names.html">rray_set_row_names</a></span>(x_col_nms_rray, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"row1"</span>, <span class="st">"row2"</span>))</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">x_col_and_row_nms_rray</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="co">#&gt; &lt;rray&lt;int&gt;[,1][2]&gt;</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">#&gt;      c1</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">#&gt; row1  1</span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt; row2  2</span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"></a>
<a class="sourceLine" id="cb17-8" data-line-number="8">x_row_nms_rray <span class="op">+</span><span class="st"> </span>x_col_and_row_nms_rray</a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="co">#&gt; &lt;rray&lt;int&gt;[,1][2]&gt;</span></a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="co">#&gt;    c1</span></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="co">#&gt; r1  2</span></a>
<a class="sourceLine" id="cb17-12" data-line-number="12"><span class="co">#&gt; r2  4</span></a>
<a class="sourceLine" id="cb17-13" data-line-number="13"></a>
<a class="sourceLine" id="cb17-14" data-line-number="14">x_col_and_row_nms_rray <span class="op">+</span><span class="st"> </span>x_row_nms_rray</a>
<a class="sourceLine" id="cb17-15" data-line-number="15"><span class="co">#&gt; &lt;rray&lt;int&gt;[,1][2]&gt;</span></a>
<a class="sourceLine" id="cb17-16" data-line-number="16"><span class="co">#&gt;      c1</span></a>
<a class="sourceLine" id="cb17-17" data-line-number="17"><span class="co">#&gt; row1  2</span></a>
<a class="sourceLine" id="cb17-18" data-line-number="18"><span class="co">#&gt; row2  4</span></a></code></pre></div>
<p>This approach emphasizes maintaining the maximum amount of information possible. The underlying engine for dimension name handling is <code><a href="../reference/common-dim-names.html">rray_dim_names_common()</a></code>. Pass it multiple inputs and it will return the common dimension names using rray’s rules.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="../reference/common-dim-names.html">rray_dim_names_common</a></span>(x_row_nms, x_col_nms)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="co">#&gt; [1] "r1" "r2"</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="co">#&gt; [1] "c1"</span></a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#subsetting">Subsetting</a></li>
      <li><a href="#subsetting-by-position">Subsetting by position</a></li>
      <li><a href="#dimension-names">Dimension Names</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Davis Vaughan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
