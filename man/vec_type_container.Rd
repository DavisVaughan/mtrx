% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/container-type.R
\name{vec_type_container}
\alias{vec_type_container}
\alias{vec_type_container_common}
\title{Find the container type of a set of vectors}
\usage{
vec_type_container(x)

vec_type_container_common(..., .ptype = NULL)
}
\arguments{
\item{x}{Vector to compute the container type for.}

\item{...}{Vectors to compute the common container type for.}

\item{.ptype}{If not \code{NULL}, overrides the common container type of \code{...}.}
}
\description{
\code{vec_type_container()} finds the container type of a single vector.
\code{vec_type_container_common()} finds the common container type of multiple
vectors.
}
\details{
The container type is a 0-size, 0-shape prototype that represents the
"container" of \code{x}. A container is generally an S3 class that can hold
multiple different "inner" types. For example, an rray is a container
that can hold integers, logicals, or doubles as inner types.

For base R objects, this returns \code{logical()}.

For more complex types, a method should be written that returns an
empty version of the input with no shape or size. If that complex type
can have multiple inner types, pick one to return consistently for all
inner type variations, as there should be no reliance on the inner type
when inspecting the container type.

The common container type is useful alongside \code{\link[=vec_cast_container]{vec_cast_container()}}.
For example, \code{rray_greater()} uses \code{vec_type_container_common()}
to determine the common container for the output, and then uses
\code{vec_cast_container()} to restore the logical result of the comparison
to either an rray or an array, depending on the container type.

Critically, the container type is independent of the \emph{inner} type of a
vector. This means that while \code{vec_type_common(character(), numeric())}
is an error, \code{vec_type_container_common(character(), numeric())}
returns \code{logical()} because they are both base R containers.
}
\examples{
# The container of base R atomics is just logical()
vec_type_container(1)

# The container of an rray is an empty logical rray
vec_type_container(rray(1))

# Find the common container of multiple types
# (the rray type is more complex here, and becomes the common container)
vec_type_container_common(1, TRUE, rray(1L))

# Not an error!
vec_type_container_common(character(), logical())

}
\keyword{internal}
